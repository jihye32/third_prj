<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
<meta charset="UTF-8">
<title>쌍용장터 관리자센터 - 거래내역</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<link rel="stylesheet" type="text/css"
	th:href="@{/css/manager_member_product.css}">
</head>
<body>
	<header id="kakaoHead">
		<div class="tit_logo">쌍용장터 관리자센터</div>
		<div class="util_menu">
			<a th:href="@{/logout}" class="btn_logout">로그아웃</a>
		</div>
	</header>

	<div class="wrapper">
		<aside class="menu_side">
			<div class="menu_group">관리자 메뉴</div>
			<ul class="list_menu">
				<li>대시보드</li>
				<li><a th:href="@{/manage/product/product_main}"
					style="text-decoration: none; color: inherit;">물품관리</a></li>
				<li class="active">회원관리</li>
				<li>고객센터관리</li>
				<li>신고관리</li>
				<li>매출관리</li>
				<li>이벤트관리</li>
			</ul>
		</aside>

		<main id="main-container">
			<div class="container">
				<div class="row shop-header align-items-center">
					<div class="col-auto">
						<img
							th:src="${member?.profile_img != null ? '/upload/' + member.profile_img : 'https://via.placeholder.com/80'}"
							class="shop-profile-img">
					</div>
					<div class="col">
						<h4 class="fw-bold mb-1" th:text="${member?.col}">상점명</h4>
						<p class="shop-info-text mb-2" th:text="${member?.introduce}">소개글</p>
						<div class="shop-badges">
							<span class="me-3"><i class="bi bi-shield-check"></i>본인인증
								완료</span> <span><i class="bi bi-shop"></i>상점오픈일 <span
								th:text="${member?.open_days}">0</span>일 전</span>
						</div>
					</div>
				</div>

				<ul class="nav nav-tabs" id="shopTabs" role="tablist">
					<li class="nav-item" style="width: 50%;"><a class="nav-link"
						th:classappend="${type == 'purchase' ? 'active' : ''}"
						th:href="@{/manage/member/member_product(id=${id}, type='purchase')}">구매한
							상품</a></li>
					<li class="nav-item" style="width: 50%;"><a class="nav-link"
						th:classappend="${type == 'sale' ? 'active' : ''}"
						th:href="@{/manage/member/member_product(id=${id}, type='sale')}">판매한
							상품</a></li>
				</ul>

				<div class="tab-content mt-4">
					<div th:if="${not #lists.isEmpty(historyList)}">
						<div class="history-summary">
							<div class="prod-count">
								상품 <span>[[${historyList.size()}]]</span>
							</div>
						</div>

						<table class="history-table">
							<thead>
								<tr>
									<th>상품번호</th>
									<th>상품 이름</th>
									<th>거래체결일자</th>
									<th th:text="${type == 'purchase' ? '판매자 ID' : '구매자 ID'}">상대방
										ID</th>
									<th>[[${type == 'purchase' ? '구매 가격' : '판매 가격'}]]</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="h : ${historyList}">
									<td th:text="${h.product_num}">번호</td>
									<td><span class="text-muted" th:text="${h.title}">상품이름</span></td>
									<td><span class="box-date" th:text="${h.trade_date}">날짜</span></td>
									<td><span class="box-id" th:text="${h.target_id}">상대방ID</span></td>
									<td class="text-price"
										th:text="${#numbers.formatInteger(h.price, 3, 'COMMA') + '원'}">가격</td>
								</tr>
							</tbody>
						</table>
					</div>

					<div class="no-history text-center py-5"
						th:if="${#lists.isEmpty(historyList)}">
						<i class="bi bi-exclamation-circle fs-1 d-block mb-3 text-muted"></i>
						<p class="text-muted fw-bold"
							th:text="${type == 'purchase' ? '구매 기록이 존재하지 않습니다.' : '판매 기록이 존재하지 않습니다.'}"></p>
					</div>
				</div>
			</div>
		</main>
	</div>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>